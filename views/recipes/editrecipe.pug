//-available vars: action, pagetitle, currentings, ings
//-possible vars: recipeid, recipename (if action is create they are undefined)
//-return vars: action, currentings
//-possible return vars: recipeid, recipename, subaction (tells what to do with opingid), opingid (ingredient to apply subaction), amount
doctype html
html(lang="en")
    head
        link(href='/css/styleaddproducts.css', rel='stylesheet')
        link(rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Tangerine")
        meta(http-equiv="cache-control", content="max-age=0")
        meta(http-equiv="cache-control", content="no-cache")
        meta(http-equiv="expires", content="0")
        meta(http-equiv="expires", content="Tue, 01 Jan 1980 1:00:00 GMT")
        meta(http-equiv="pragma", content="no-cache")
        title=pagetitle
    body
        center
            h1=pagetitle
        form(method="post")
            input(type="hidden", name="action", value=action)
            input(type="hidden", name="subaction", value="changename")
            input(type="hidden", name="recipeid", value=recipeid)
            input(type="hidden", name="currentings", value=currentings)
            center
                | Name: 
                input(name="recipename", value=recipename)
                | 
                input(type="submit", value="Change Name")
        | Ingredients
        ul
        each value in currentings
            - var rel = value[0]
            - var rp = value[1]
            - var listitem = rel.amount + " " + rp.unit + "(s) of " + rp.name
            li
                label=listitem
                form(method="post")
                    input(type="hidden", name="action", value=action)
                    input(type="hidden", name="subaction", value="deleteing")
                    input(type="hidden", name="recipeid", value=recipeid)
                    input(type="hidden", name="currentings", value=currentings)
                    input(type="hidden", name="oping", value=rp._id)
                    input(type="submit",value="Delete")
        center
            | Add Ingredient
            form(method="post")
                input(type="hidden", name="action", value=action)
                input(type="hidden", name="subaction", value="adding")
                input(type="hidden", name="recipeid", value=recipeid)
                input(type="hidden", name="currentings", value=currentings)
                input(name="amount", value="0", style="text-align:right; width: 30px")
                |  
                select(name="oping")
                    each rp in ings
                        option(value=rp._id)=rp.name
                br
                input(type="submit",value="Add")
                
